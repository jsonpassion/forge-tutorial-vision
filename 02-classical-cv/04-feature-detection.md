# íŠ¹ì§•ì  ê²€ì¶œ

> SIFT, SURF, ORB íŠ¹ì§• ì¶”ì¶œê¸°

## ê°œìš”

ë‘ ì¥ì˜ ì‚¬ì§„ì—ì„œ ê°™ì€ ê±´ë¬¼ì„ ì°¾ì•„ ì—°ê²°í•˜ê±°ë‚˜, íŒŒë…¸ë¼ë§ˆ ì‚¬ì§„ì„ ë§Œë“¤ë ¤ë©´ "ì´ë¯¸ì§€ Aì˜ ì´ ë¶€ë¶„ì´ ì´ë¯¸ì§€ Bì˜ ì € ë¶€ë¶„ê³¼ ê°™ë‹¤"ëŠ” ê²ƒì„ ì•Œì•„ë‚´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ê²ƒì´ **íŠ¹ì§•ì (Keypoint)** ê²€ì¶œê³¼ **ê¸°ìˆ ì(Descriptor)** ì¶”ì¶œì…ë‹ˆë‹¤.

**ì„ ìˆ˜ ì§€ì‹**: [ì—ì§€ ê²€ì¶œ](./03-edge-detection.md) â€” ê¸°ìš¸ê¸°, ì—ì§€ì˜ ê°œë…
**í•™ìŠµ ëª©í‘œ**:
- íŠ¹ì§•ì ê³¼ ê¸°ìˆ ìê°€ ë¬´ì—‡ì¸ì§€ ì´í•´í•œë‹¤
- SIFT, ORBì˜ ì°¨ì´ì™€ ì í•©í•œ ìƒí™©ì„ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤
- ë‘ ì´ë¯¸ì§€ ì‚¬ì´ì˜ íŠ¹ì§•ì  ë§¤ì¹­ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤

## ì™œ ì•Œì•„ì•¼ í• ê¹Œ?

íŠ¹ì§•ì  ê²€ì¶œì€ **ì´ë¯¸ì§€ ë§¤ì¹­, íŒŒë…¸ë¼ë§ˆ í•©ì„±, 3D ë³µì›, ê°ì²´ ì¸ì‹, AR(ì¦ê°•í˜„ì‹¤)** ë“±ì˜ í•µì‹¬ ê¸°ìˆ ì…ë‹ˆë‹¤. ë”¥ëŸ¬ë‹ì´ ë“±ì¥í•˜ê¸° ì „ì—ëŠ” SIFTê°€ CVì˜ ì¤‘ì‹¬ì´ì—ˆê³ , ì§€ê¸ˆë„ 3D ë¹„ì „([ì¹´ë©”ë¼ ê¸°í•˜í•™](../16-3d-vision/03-camera-geometry.md), [SLAM](../16-3d-vision/04-slam.md))ì—ì„œ í™œë°œíˆ ì‚¬ìš©ë©ë‹ˆë‹¤.

## í•µì‹¬ ê°œë…

### 1. íŠ¹ì§•ì (Keypoint)ê³¼ ê¸°ìˆ ì(Descriptor)

> ğŸ’¡ **ë¹„ìœ **: ì¹œêµ¬ì—ê²Œ ê±´ë¬¼ ì‚¬ì§„ ì† íŠ¹ì • ìœ„ì¹˜ë¥¼ ì•Œë ¤ì¤€ë‹¤ê³  ìƒê°í•´ ë³´ì„¸ìš”. "3ì¸µ ì™¼ìª½ì—ì„œ ë‘ ë²ˆì§¸ ì°½ë¬¸"ì´ë¼ê³  í•˜ë©´ **ìœ„ì¹˜**ê°€ íŠ¹ì§•ì ì´ê³ , "íŒŒë€ í”„ë ˆì„, ì‚¬ê°í˜•, ì»¤íŠ¼ ìˆìŒ"ì´ë¼ëŠ” **ë¬˜ì‚¬**ê°€ ê¸°ìˆ ìì…ë‹ˆë‹¤. ë‹¤ë¥¸ ê°ë„ì—ì„œ ì°ì€ ì‚¬ì§„ì—ì„œë„ ê°™ì€ ë¬˜ì‚¬ë¥¼ ì°¾ìœ¼ë©´ ê°™ì€ ì°½ë¬¸ì„ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

| ê°œë… | ë¹„ìœ  | ì‹¤ì œ ì˜ë¯¸ |
|------|------|----------|
| **íŠ¹ì§•ì  (Keypoint)** | "3ì¸µ ì™¼ìª½ ì°½ë¬¸" | ì´ë¯¸ì§€ì—ì„œ ê³ ìœ í•˜ê²Œ ì‹ë³„ ê°€ëŠ¥í•œ ì ì˜ **ìœ„ì¹˜ì™€ í¬ê¸°** |
| **ê¸°ìˆ ì (Descriptor)** | "íŒŒë€ í”„ë ˆì„, ì‚¬ê°í˜•" | ê·¸ ì  ì£¼ë³€ì˜ íŒ¨í„´ì„ ìˆ«ìë¡œ ìš”ì•½í•œ **ë²¡í„°** |

ì¢‹ì€ íŠ¹ì§•ì ì˜ ì¡°ê±´:
- **ë°˜ë³µì„±**: ê°™ì€ ì¥ë©´ì„ ë‹¤ë¥¸ ê°ë„/ì¡°ëª…ì—ì„œ ì°ì–´ë„ ê°™ì€ ì ì´ ê²€ì¶œë¨
- **êµ¬ë³„ì„±**: ë‹¤ë¥¸ ì ë“¤ê³¼ í—·ê°ˆë¦¬ì§€ ì•ŠëŠ” ê³ ìœ í•œ íŒ¨í„´ì„ ê°€ì§
- **ì•ˆì •ì„±**: í¬ê¸° ë³€í™”, íšŒì „ì—ë„ ì˜ ìœ ì§€ë¨

### 2. SIFT â€” ìŠ¤ì¼€ì¼ì— ë¶ˆë³€í•œ íŠ¹ì§•

> ğŸ’¡ **ë¹„ìœ **: SIFTëŠ” **ì–´ë””ì„œ ë´ë„ ì•Œì•„ë³¼ ìˆ˜ ìˆëŠ” ì§€ë¬¸**ì„ ë§Œë“œëŠ” ì•Œê³ ë¦¬ì¦˜ì…ë‹ˆë‹¤. ì‚¬ì§„ì„ í™•ëŒ€í•˜ë“ , ì¶•ì†Œí•˜ë“ , íšŒì „í•˜ë“  ê°™ì€ ì§€ë¬¸ì´ ë‚˜ì˜µë‹ˆë‹¤.

**S**cale-**I**nvariant **F**eature **T**ransformì˜ ì•½ìë¡œ, 2004ë…„ David Loweê°€ ë°œí‘œí–ˆìŠµë‹ˆë‹¤.

SIFTì˜ ë™ì‘ ê³¼ì •:
1. **ìŠ¤ì¼€ì¼ ê³µê°„ êµ¬ì¶•**: ì´ë¯¸ì§€ë¥¼ ì—¬ëŸ¬ í¬ê¸°ë¡œ ë¸”ëŸ¬í•˜ì—¬ ë‹¤ì–‘í•œ ìŠ¤ì¼€ì¼ì—ì„œ íŠ¹ì§• íƒìƒ‰
2. **ê·¹ê°’ ê²€ì¶œ**: ì£¼ë³€ë³´ë‹¤ íŠ€ëŠ” ì (ê·¹ëŒ€/ê·¹ì†Œ)ì„ íŠ¹ì§•ì  í›„ë³´ë¡œ ì„ ì •
3. **ë°©í–¥ í• ë‹¹**: ê° íŠ¹ì§•ì ì— ì£¼ìš” ë°©í–¥ì„ ë¶€ì—¬ (íšŒì „ ë¶ˆë³€ì„±)
4. **ê¸°ìˆ ì ìƒì„±**: 16Ã—16 ì˜ì—­ì„ 4Ã—4 ë¸”ë¡ 16ê°œë¡œ ë‚˜ëˆ„ê³ , ê° ë¸”ë¡ì—ì„œ 8ë°©í–¥ íˆìŠ¤í† ê·¸ë¨ â†’ **128ì°¨ì› ë²¡í„°**

```python
import cv2

img = cv2.imread("photo.jpg", cv2.IMREAD_GRAYSCALE)

# SIFT ìƒì„± (opencv-contrib-python í•„ìš”)
sift = cv2.SIFT_create()

# íŠ¹ì§•ì  ê²€ì¶œ + ê¸°ìˆ ì ì¶”ì¶œ
keypoints, descriptors = sift.detectAndCompute(img, None)

print(f"ê²€ì¶œëœ íŠ¹ì§•ì  ìˆ˜: {len(keypoints)}")
print(f"ê¸°ìˆ ì í˜•íƒœ: {descriptors.shape}")  # (N, 128)
print(f"ê¸°ìˆ ì íƒ€ì…: {descriptors.dtype}")   # float32

# íŠ¹ì§•ì  ì •ë³´ í™•ì¸ (ì²« ë²ˆì§¸)
kp = keypoints[0]
print(f"\nì²« ë²ˆì§¸ íŠ¹ì§•ì :")
print(f"  ìœ„ì¹˜: ({kp.pt[0]:.1f}, {kp.pt[1]:.1f})")
print(f"  í¬ê¸°: {kp.size:.1f}")
print(f"  ë°©í–¥: {kp.angle:.1f}Â°")
```

### 3. ORB â€” ë¹ ë¥´ê³  ë¬´ë£Œì¸ ëŒ€ì•ˆ

> ğŸ’¡ **ë¹„ìœ **: SIFTê°€ ì •ë°€í•œ ì „ë¬¸ ì§€ë¬¸ ê°ì‹ì´ë¼ë©´, ORBëŠ” **ë¹ ë¥¸ í˜„ì¥ ì§€ë¬¸ ëŒ€ì¡°**ì…ë‹ˆë‹¤. ì •í™•ë„ëŠ” ì•½ê°„ ë‚®ì§€ë§Œ **í›¨ì”¬ ë¹ ë¥´ê³ ** ë¬´ë£Œ(íŠ¹í—ˆ ì—†ìŒ)ì…ë‹ˆë‹¤.

**O**riented FAST and **R**otated **B**RIEFì˜ ì•½ìì…ë‹ˆë‹¤. FASTë¡œ íŠ¹ì§•ì ì„ ë¹ ë¥´ê²Œ ì°¾ê³ , BRIEFë¡œ ê¸°ìˆ ìë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ë§Œë“­ë‹ˆë‹¤.

| ë¹„êµ í•­ëª© | SIFT | ORB |
|----------|------|-----|
| ê¸°ìˆ ì í¬ê¸° | 128ì°¨ì› (float) | 32ì°¨ì› (binary) |
| ì†ë„ | ëŠë¦¼ | **~100ë°° ë¹ ë¦„** |
| ë¼ì´ì„ ìŠ¤ | íŠ¹í—ˆ ë§Œë£Œ (í˜„ì¬ ë¬´ë£Œ) | ë¬´ë£Œ |
| ìŠ¤ì¼€ì¼ ë¶ˆë³€ | ë›°ì–´ë‚¨ | ë³´í†µ |
| íšŒì „ ë¶ˆë³€ | ë›°ì–´ë‚¨ | ì¢‹ìŒ |
| ì í•© ìš©ë„ | ì •ë°€ ë§¤ì¹­, 3D ë³µì› | ì‹¤ì‹œê°„ ì•±, ëª¨ë°”ì¼ |

```python
import cv2

img = cv2.imread("photo.jpg", cv2.IMREAD_GRAYSCALE)

# ORB ìƒì„± (ê¸°ë³¸ 500ê°œ íŠ¹ì§•ì )
orb = cv2.ORB_create(nfeatures=1000)

# íŠ¹ì§•ì  ê²€ì¶œ + ê¸°ìˆ ì ì¶”ì¶œ
keypoints, descriptors = orb.detectAndCompute(img, None)

print(f"ê²€ì¶œëœ íŠ¹ì§•ì  ìˆ˜: {len(keypoints)}")
print(f"ê¸°ìˆ ì í˜•íƒœ: {descriptors.shape}")  # (N, 32)
print(f"ê¸°ìˆ ì íƒ€ì…: {descriptors.dtype}")   # uint8 (ë°”ì´ë„ˆë¦¬)
```

### 4. íŠ¹ì§•ì  ë§¤ì¹­ â€” ë‘ ì´ë¯¸ì§€ ì—°ê²°í•˜ê¸°

íŠ¹ì§•ì ì„ ì°¾ì•˜ìœ¼ë©´, ë‘ ì´ë¯¸ì§€ì˜ ê¸°ìˆ ìë¥¼ **ë¹„êµí•˜ì—¬ ê°™ì€ ì ì„ ì°¾ìŠµë‹ˆë‹¤.**

```python
import cv2

img1 = cv2.imread("photo1.jpg", cv2.IMREAD_GRAYSCALE)
img2 = cv2.imread("photo2.jpg", cv2.IMREAD_GRAYSCALE)

# ORBë¡œ íŠ¹ì§•ì  ì¶”ì¶œ
orb = cv2.ORB_create(nfeatures=1000)
kp1, des1 = orb.detectAndCompute(img1, None)
kp2, des2 = orb.detectAndCompute(img2, None)

# BFMatcherë¡œ ë§¤ì¹­ (ë°”ì´ë„ˆë¦¬ ê¸°ìˆ ì â†’ í•´ë° ê±°ë¦¬)
bf = cv2.BFMatcher(cv2.NORM_HAMMING, crossCheck=True)
matches = bf.match(des1, des2)

# ê±°ë¦¬ìˆœ ì •ë ¬ (ì‘ì„ìˆ˜ë¡ ìœ ì‚¬)
matches = sorted(matches, key=lambda x: x.distance)

print(f"ì´ë¯¸ì§€1 íŠ¹ì§•ì : {len(kp1)}ê°œ")
print(f"ì´ë¯¸ì§€2 íŠ¹ì§•ì : {len(kp2)}ê°œ")
print(f"ë§¤ì¹­ëœ ìŒ: {len(matches)}ê°œ")
print(f"ìµœê³  ë§¤ì¹­ ê±°ë¦¬: {matches[0].distance:.1f}")
print(f"ìµœì € ë§¤ì¹­ ê±°ë¦¬: {matches[-1].distance:.1f}")
```

```python
import cv2

# SIFT ë§¤ì¹­ (float ê¸°ìˆ ì â†’ L2 ê±°ë¦¬ + KNN)
sift = cv2.SIFT_create()
kp1, des1 = sift.detectAndCompute(img1, None)
kp2, des2 = sift.detectAndCompute(img2, None)

bf = cv2.BFMatcher(cv2.NORM_L2)
matches = bf.knnMatch(des1, des2, k=2)

# Loweì˜ ë¹„ìœ¨ í…ŒìŠ¤íŠ¸ â€” ì¢‹ì€ ë§¤ì¹­ë§Œ ë‚¨ê¸°ê¸°
good_matches = []
for m, n in matches:
    if m.distance < 0.75 * n.distance:  # ìµœê·¼ì ‘ê³¼ ì°¨ê·¼ì ‘ì˜ ë¹„ìœ¨
        good_matches.append(m)

print(f"ì „ì²´ ë§¤ì¹­: {len(matches)}ê°œ")
print(f"ì¢‹ì€ ë§¤ì¹­: {len(good_matches)}ê°œ")
```

### 5. ë§¤ì¹­ ë°©ë²• ë¹„êµ

| ë§¤ì¹­ ë°©ë²• | ê¸°ìˆ ì íƒ€ì… | ê±°ë¦¬ ì²™ë„ | íŠ¹ì§• |
|----------|-----------|----------|------|
| **BFMatcher** (Brute-Force) | ëª¨ë‘ ê°€ëŠ¥ | HAMMING ë˜ëŠ” L2 | ëª¨ë“  ìŒ ë¹„êµ, ì •í™•í•˜ì§€ë§Œ ëŠë¦¼ |
| **FLANN** | float ê¶Œì¥ | L2 | ê·¼ì‚¬ ìµœê·¼ì ‘ íƒìƒ‰, ëŒ€ëŸ‰ ë§¤ì¹­ì— ë¹ ë¦„ |

> **ì‹¤ë¬´ íŒ**: ORB â†’ BFMatcher(HAMMING), SIFT â†’ FLANN ë˜ëŠ” BFMatcher(L2)ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

## ì‹¤ìŠµ: ì§ì ‘ í•´ë³´ê¸°

### SIFT vs ORB ì†ë„ ë¹„êµ

```python
import cv2
import time

img = cv2.imread("photo.jpg", cv2.IMREAD_GRAYSCALE)

# SIFT ì†ë„ ì¸¡ì •
sift = cv2.SIFT_create()
start = time.time()
kp_sift, des_sift = sift.detectAndCompute(img, None)
time_sift = time.time() - start

# ORB ì†ë„ ì¸¡ì •
orb = cv2.ORB_create(nfeatures=len(kp_sift))  # ê°™ì€ ìˆ˜ë¡œ ë§ì¶¤
start = time.time()
kp_orb, des_orb = orb.detectAndCompute(img, None)
time_orb = time.time() - start

print(f"SIFT: {len(kp_sift)}ê°œ, {time_sift*1000:.1f}ms, ê¸°ìˆ ì {des_sift.shape}")
print(f"ORB:  {len(kp_orb)}ê°œ, {time_orb*1000:.1f}ms, ê¸°ìˆ ì {des_orb.shape}")
print(f"ì†ë„ ì°¨ì´: ORBê°€ {time_sift/time_orb:.1f}ë°° ë¹ ë¦„")
```

## í•µì‹¬ ì •ë¦¬

| ê°œë… | ì„¤ëª… |
|------|------|
| **íŠ¹ì§•ì  (Keypoint)** | ì´ë¯¸ì§€ì—ì„œ ê³ ìœ í•˜ê²Œ ì‹ë³„ ê°€ëŠ¥í•œ ì  (ìœ„ì¹˜, í¬ê¸°, ë°©í–¥) |
| **ê¸°ìˆ ì (Descriptor)** | íŠ¹ì§•ì  ì£¼ë³€ íŒ¨í„´ì„ ìˆ«ì ë²¡í„°ë¡œ ìš”ì•½í•œ ê²ƒ |
| **SIFT** | 128ì°¨ì›, ìŠ¤ì¼€ì¼/íšŒì „ ë¶ˆë³€, ì •ë°€í•˜ì§€ë§Œ ëŠë¦¼ |
| **ORB** | 32ì°¨ì› ë°”ì´ë„ˆë¦¬, ë§¤ìš° ë¹ ë¦„, ì‹¤ì‹œê°„ ì í•© |
| **ë§¤ì¹­** | ë‘ ì´ë¯¸ì§€ì˜ ê¸°ìˆ ì ê°„ ê±°ë¦¬ë¥¼ ë¹„êµí•˜ì—¬ ëŒ€ì‘ì  ì°¾ê¸° |
| **ë¹„ìœ¨ í…ŒìŠ¤íŠ¸** | ì¢‹ì€ ë§¤ì¹­ë§Œ ë‚¨ê¸°ëŠ” Loweì˜ ê¸°ë²• (0.75 ê¸°ì¤€) |

## ë‹¤ìŒ ì„¹ì…˜ ë¯¸ë¦¬ë³´ê¸°

ì—ì§€ì™€ íŠ¹ì§•ì ì€ ì´ë¯¸ì§€ì˜ **êµ¬ì¡°ì  ì •ë³´**ë¥¼ ì¶”ì¶œí•˜ëŠ” ë°©ë²•ì´ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì„¹ì…˜ **[í˜•íƒœí•™ì  ì—°ì‚°](./05-morphology.md)**ì—ì„œëŠ” ì´ë¯¸ì§€ì˜ **í˜•íƒœ(ëª¨ì–‘)**ë¥¼ ë³€í˜•í•˜ëŠ” ì¹¨ì‹, íŒ½ì°½, ì—´ê¸°, ë‹«ê¸° ì—°ì‚°ì„ ë°°ì›ë‹ˆë‹¤. ì´ì§„ ì´ë¯¸ì§€ ì²˜ë¦¬ì™€ ë…¸ì´ì¦ˆ ì œê±°ì— í•„ìˆ˜ì ì¸ ë„êµ¬ì…ë‹ˆë‹¤.

## ì°¸ê³  ìë£Œ

- [OpenCV ê³µì‹ íŠœí† ë¦¬ì–¼ - SIFT Introduction](https://docs.opencv.org/4.x/da/df5/tutorial_py_sift_intro.html) - SIFT ì•Œê³ ë¦¬ì¦˜ ê³µì‹ ì„¤ëª…
- [OpenCV ê³µì‹ íŠœí† ë¦¬ì–¼ - Feature Matching](https://docs.opencv.org/4.x/dc/dc3/tutorial_py_matcher.html) - BFMatcher, FLANN ë§¤ì¹­ ê°€ì´ë“œ
- [Machine Learning Mastery - Image Feature Extraction in OpenCV](https://machinelearningmastery.com/opencv_sift_surf_orb_keypoints/) - SIFT/SURF/ORB ë¹„êµ ê°€ì´ë“œ
- [Pysource - Feature Detection Tutorial](https://pysource.com/2018/03/21/feature-detection-sift-surf-obr-opencv-3-4-with-python-3-tutorial-25/) - Python ì½”ë“œ ì˜ˆì œì™€ ì‹œê°í™”
